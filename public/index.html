<!doctype html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            body {
                font-family:sans-serif;
            }
            
            h1 {
                background:rgb(38, 163, 172);
                text-align:center;
                width:fit-content;
                margin:auto;
                padding:1%;
                border-radius:1em;
                margin-bottom:1vh;
            }
            .boxes {
                background:aquamarine;
                width:fit-content;
                padding:1%;
                margin:auto;
                text-align:center;
                margin-bottom:1vh;
                margin-top:2vh;
            }
            .titles {
                font-size:120%;
                margin-bottom:1vh;
            }
        </style>
    </head>
    <body>

        <h1>
            Astrology
        </h1>

        <form class='boxes' method="POST" action="/signUp" onsubmit='addData()'>
            <div class='titles'>Sign Up</div>
            <div>Username: <input type='text' name='username'></div>
            <div>Password: <input type='text' name='password'></div>
            <div>Birthday: <input type='date' name='birthday' id='birthday'></div>
            <input type='hidden' id='tropical' name='tropical'>
            <input type='hidden' id='chinese' name='chinese'>
            <input type='hidden' id='element' name='element'>
            <input type="submit">
        </form>
        
        <form class='boxes' method="POST" action="/logIn" onsubmit='setUserName()'>
            <div class='titles'>Log In</div>
            <div>Username: <input type='text' name='username' id='accountName'></div>
            <div>Password: <input type='password' name='password'></div>
            <input type="submit">
        </form>

    </body>
    <script>

    const accountName = document.getElementById('accountName');

    function setUserName() {
        document.cookie = `accountName=${accountName.value}`;
    }
    
    let tropicalSign, chineseSign, elementSign;

    const birthday = document.getElementById('birthday');
    const tropical = document.getElementById('tropical');
    const chinese = document.getElementById('chinese');

    let newYears = [
    ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
        '02-08',//40
        '01-27',//41
        '02-15',//42
        '02-04',//43
        '01-25',//44
        '02-13',//45
        '02-01',//46
        '01-22',//47
        '02-10',//48
        '01-29',//49
        '02-17',//50
        '02-06',//51
        '01-27',//52
        '02-14',//53
        '02-03',//54
        '01-24',//55
        '02-12',//56
        '01-31',//57
        '02-18',//58
        '02-08',//59
        '01-28',//60
        '02-15',//61
        '02-05',//62
        '01-25',//63
        '02-13',//64
        '02-02',//65
        '01-21',//66
        '02-09',//67
        '01-30',//68
        '02-17',//69
        '02-06',//70
        '01-27',//71
        '02-15',//72
        '02-03',//73
        '01-23',//74
        '02-11',//75
        '01-31',//76
        '02-18',//77
        '02-07',//78
        '01-28',//79
        '02-16',//80
        '02-05',//81
        '01-25',//82
        '02-13',//83
        '02-02',//84
        '02-20',//85
        '02-09',//86
        '01-29',//87
        '02-17',//88
        '02-06',//89
        '01-27',//90
        '02-15',//91
        '02-04',//92
        '01-23',//93
        '02-10',//94
        '01-31',//95
        '02-19',//96
        '02-07',//97
        '01-28',//98
        '02-16',//99
        '02-05',//00
        '01-24',//01
        '02-12',//02
    ];

    let elements = [
    ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
        'metal', 'metal', 'water', 'water', 'wood', 'wood', 'fire', 'fire', 'earth', 'earth',
        'metal', 'metal', 'water', 'water', 'wood', 'wood', 'fire', 'fire', 'earth', 'earth',
        'metal', 'metal', 'water', 'water', 'wood', 'wood', 'fire', 'fire', 'earth', 'earth',
        'metal', 'metal', 'water', 'water', 'wood', 'wood', 'fire', 'fire', 'earth', 'earth',
        'metal', 'metal', 'water', 'water', 'wood', 'wood', 'fire', 'fire', 'earth', 'earth',
        'metal', 'metal', 'water', 'water', 'wood', 'wood', 'fire', 'fire', 'earth', 'earth',
        'metal', 'metal'
    ];


    function addData() {

        let month = parseInt(birthday.value.slice(5, 7))
        let day = parseInt(birthday.value.slice(8, 10))
        let year = parseInt(birthday.value.slice(2, 4)) 

        let newYearsMonth = parseInt(newYears[year][0] + newYears[year][1]);
        let newYearsDay = parseInt(newYears[year][3] + newYears[year][4]);

        if (month == 3 && day >= 21 || month == 4 && day < 21) {
            tropicalSign = 'aries';
        } else if (month == 4 && day >= 21 || month == 5 && day < 22) {
            tropicalSign = 'taurus';
        } else if (month == 5 && day >= 22 || month == 6 && day < 22) {
            tropicalSign = 'gemini';
        } else if (month == 6 && day >= 22 || month == 7 && day < 23) {
            tropicalSign = 'cancer';
        } else if (month == 7 && day >= 23 || month == 8 && day < 23) {
            tropicalSign = 'leo';
        } else if (month == 8 && day >= 23 || month == 9 && day < 23) {
            tropicalSign = 'virgo';
        } else if (month == 9 && day >= 23 || month == 10 && day < 23) {
            tropicalSign = 'libra';
        } else if (month == 10 && day >= 23 || month == 11 && day < 22) {
            tropicalSign = 'scorpio';
        } else if (month == 11 && day >= 22 || month == 12 && day < 22) {
            tropicalSign = 'sagittarius';
        } else if (month == 12 && day >= 22 || month == 1 && day < 20) {
            tropicalSign = 'capricorn';
        } else if (month == 1 && day >= 20 || month == 2 && day < 20) {
            tropicalSign = 'aquarius';
        } else if (month == 2 && day >= 20 || month == 3 && day < 21) {
            tropicalSign = 'pisces';
        }

        if (tropicalSign == 'capricorn' || tropicalSign == 'aquarius') {
            if (month <= newYearsMonth && day <= newYearsDay) {
                year -= 1;
            }
        }


                switch(year) {
                    case 40:
                        chineseSign = 'dragon';
                    break;
                    case 41:
                        chineseSign = 'snake';
                    break;
                    case 42:
                        chineseSign = 'horse';
                    break;
                    case 43:
                        chineseSign = 'goat';
                    break;
                    case 44:
                        chineseSign = 'monkey';
                    break;
                    case 45:
                        chineseSign = 'rooster';
                    break;
                    case 46:
                        chineseSign = 'dog';
                    break;
                    case 47:
                        chineseSign = 'pig';
                    break;
                    case 48:
                        chineseSign ='rat';
                    break;
                    case 50:
                        chineseSign = 'ox';
                    break;
                    case 51:
                        chineseSign = 'tiger';
                    break;
                    case 52:
                        chineseSign = 'rabbit';
                    break;
                    case 53:
                        chineseSign = 'dragon';
                    break;
                    case 54:
                        chineseSign = 'snake';
                    break;
                    case 55:
                        chineseSign = 'horse';
                    break;
                    case 56: 
                        chineseSign = 'monkey';
                    break;
                    case 57:
                        chineseSign = 'rooster';
                    break;
                    case 58:
                        chineseSign = 'dog';
                    break;
                    case 59:
                        chineseSign = 'pig';
                    break;
                    case 60:
                        chineseSign = 'rat';
                    break;
                    case 61:
                        chineseSign = 'ox';
                    break;
                    case 62:
                        chineseSign = 'tiger';
                    break;
                    case 63:
                        chineseSign = 'rabbit';
                    break;
                    case 64:
                        chineseSign = 'dragon';
                    break;
                    case 65:
                        chineseSign = 'snake';
                    break;
                    case 66:
                        chineseSign = 'horse';
                    break;
                    case 67:
                        chineseSign = 'goat';
                    break;
                    case 68:
                        chineseSign = 'monkey';
                    break;
                    case 69:
                        chineseSign = 'rooster';
                    break;
                    case 70:
                        chineseSign = 'dog';
                    break;
                    case 71:
                        chineseSign = 'pig';
                    break;
                    case 72:
                        chineseSign = 'rat';
                    break;
                    case 73:
                        chineseSign = 'ox';
                    break;
                    case 74:
                        chineseSign = 'tiger';
                    break;
                    case 75:
                        chineseSign = 'rabbit';
                    break;
                    case 76:
                        chineseSign = 'dragon';
                    break;
                    case 77:
                        chineseSign = 'snake';
                    break;
                    case 78:
                        chineseSign = 'horse';
                    break;
                    case 79:
                        chineseSign = 'goat';
                    break;
                    case 80:
                        chineseSign = 'monkey';
                    break;
                    case 81:
                        chineseSign = 'rooster';
                    break;
                    case 82:
                        chineseSign = 'dog';
                    break;
                    case 83:
                        chineseSign = 'pig';
                    break;
                    case 84:
                        chineseSign = 'rat';
                    break;
                    case 85:
                        chineseSign = 'ox';
                    break;
                    case 86:
                        chineseSign = 'tiger';
                    break;
                    case 87:
                        chineseSign = 'rabbit';
                    break;
                    case 88:
                        chineseSign = 'dragon';
                    break;
                    case 89:
                        chineseSign = 'snake';
                    break;
                    case 90:
                        chineseSign = 'horse';
                    break;
                    case 91:
                        chineseSign = 'goat';
                    break;
                    case 92:
                        chineseSign = 'monkey';
                    break;
                    case 93:
                        chineseSign = 'rooster';
                    break;
                    case 94:
                        chineseSign = 'dog';
                    break;
                    case 95:
                        chineseSign = 'pig';
                    break;
                    case 96:
                        chineseSign = 'rat';
                    break;
                    case 97:
                        chineseSign = 'ox';
                    break;
                    case 98:
                        chineseSign = 'tiger';
                    break;
                    case 99:
                        chineseSign = 'rabbit';
                    break;
                    case 00:
                        chineseSign = 'dragon';
                    break;
                    case 01:
                        chineseSign = 'snake';
                    break;
                    case 02:
                        chineseSign = 'horse';
                    break;
                }

            if (year > 99) {
                year += 100;
            }

            elementSign = elements[year];

            tropical.value = tropicalSign;
            chinese.value = chineseSign;
            element.value = elementSign;

    }

    </script>
</html>